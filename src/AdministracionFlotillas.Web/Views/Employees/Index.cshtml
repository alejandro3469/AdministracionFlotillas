@{
    ViewData["Title"] = "Employees";
}

<div>
    <!-- Breadcrumb Navigation -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a asp-controller="Home" asp-action="Index">Home</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">Employees</li>
        </ol>
    </nav>

    <!-- Título y Descripción -->
    <div class="mb-5">
        <h2>Employees</h2>
        <p class="text-muted">Gestión de empleados de la empresa</p>
    </div>

    <!-- Vista parcial del grid -->
    @await Html.PartialAsync("_EmployeesGrid")
</div>

<!-- Modal para Enviar por Email -->
<div class="modal fade" id="modalEnviarEmail" tabindex="-1" aria-labelledby="modalEnviarEmailLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalEnviarEmailLabel">
                    <i class="fas fa-envelope"></i> Enviar Información por Email
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="emailReceptor" class="form-label">Email del Receptor</label>
                    <small id="emailMultipleInfo" class="text-muted d-none">
                        Se enviará a múltiples destinatarios
                    </small>
                    <input type="email" class="form-control" id="emailReceptor" placeholder="ejemplo@empresa.com" required>
                </div>
                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead class="table-dark">
                            <tr>
                                <th>Nombre Completo</th>
                                <th>Email</th>
                                <th>EmailPersonal</th>
                                <th>Teléfono</th>
                                <th>Fecha Contratación</th>
                                <th>Salario</th>
                                <th>Salario Anual</th>
                                <th>Departamento</th>
                            </tr>
                        </thead>
                        <tbody id="tablaResumenEmpleados">
                            <!-- Se llena dinámicamente con los empleados seleccionados -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" id="btnConfirmarEnvio">
                    <i class="fas fa-paper-plane"></i> Enviar Email
                </button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <!-- Bundle approach - Recommended for production -->
    <script src="~/js/bundles/employees.min.js" asp-append-version="true"></script>
    
    <!-- Direct namespace approach - Alternative for development/debugging -->
    <!-- Uncomment below to use individual files instead of bundle -->
    <!-- <script src="~/Scripts/Common/Utils.js"></script> -->
    <!-- <script src="~/Scripts/Employees/Employees.js"></script> -->
    
    <script>
        // All functionality is now in Employees namespace
        // Access methods like: Employees.Table.Reload(), Employees.Filters.Apply(), etc.
        // The namespace auto-initializes when the page loads
        // 
        // Example usage:
        // - Employees.Table.Reload() - Reload table data
        // - Employees.Filters.Apply() - Apply all filters
        // - Employees.Selection.GetSelected() - Get selected employees
        // - Employees.Email.OpenModal() - Open email modal
        // - Employees.Details.View(id) - View employee details
        // - Employees.Selection.Clear() - Clear all selections
    </script>
}
