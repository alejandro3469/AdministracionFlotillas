(function (n) {
    "use strict";
    n.Common = n.Common || {};
    n.Common.Utils = {
        WaitForJQuery: function (t) {
            typeof $ != "undefined" && typeof jQuery != "undefined"
                ? t()
                : setTimeout(function () {
                    n.Common.Utils.WaitForJQuery(t);
                }, 50);
        },
        ShowMessage: function (n, t, i) {
            var e = i || (n === "success"
                ? "Éxito"
                : n === "error"
                    ? "Error"
                    : n === "warning"
                        ? "Advertencia"
                        : "Información"),
                u = "toast-" + Date.now(),
                o = n === "success"
                    ? "bg-success"
                    : n === "error"
                        ? "bg-danger"
                        : n === "warning"
                            ? "bg-warning"
                            : "bg-info",
                s = n === "success"
                    ? "bi-check-circle"
                    : n === "error"
                        ? "bi-exclamation-triangle"
                        : n === "warning"
                            ? "bi-exclamation-circle"
                            : "bi-info-circle",
                h = `
                <div id="${u}" class="toast align-items-center text-white ${o} border-0" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="d-flex">
                        <div class="toast-body">
                            <i class="bi ${s} me-2"></i>
                            <strong>${e}:</strong> ${t}
                        </div>
                        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                </div>
            `, r, f;
            if (typeof document != "undefined" && document.body && ($("#toastContainer").length === 0 && $("body").append('<div id="toastContainer" class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 11"><\/div>'),
                $("#toastContainer").append(h),
                r = document.getElementById(u),
                r && typeof bootstrap != "undefined" && bootstrap.Toast)) {
                f = new bootstrap.Toast(r, { delay: 5e3 });
                f.show();
                $(r).on("hidden.bs.toast", function () {
                    $(this).remove();
                });
            }
        },
        RegisterAjaxErrorHandler: function () {
            typeof $ != "undefined" && $(document).ajaxError(function (t, i, r, u) {
                i.status === 0
                    ? n.Common.Utils.ShowMessage("error", "No se pudo conectar con el servidor. Verifique su conexión.")
                    : i.status === 500
                        ? n.Common.Utils.ShowMessage("error", "Error interno del servidor. Por favor, contacte al administrador.")
                        : i.status === 404
                            ? n.Common.Utils.ShowMessage("error", "Recurso no encontrado.")
                            : n.Common.Utils.ShowMessage("error", "Error al procesar la solicitud: " + u);
            });
        },
        Initialize: function () {
            var n = this;
            this.WaitForJQuery(function () {
                typeof document != "undefined" && (document.readyState === "loading"
                    ? document.addEventListener("DOMContentLoaded", function () {
                        n.RegisterAjaxErrorHandler();
                    })
                    : n.RegisterAjaxErrorHandler());
            });
        }
    };
    typeof document != "undefined" && (document.readyState === "loading"
        ? document.addEventListener("DOMContentLoaded", function () {
            n.Common.Utils.Initialize();
        })
        : n.Common.Utils.Initialize());
})(window),
    function (n) {
        "use strict";
        n.Employees = n.Employees || {};
        var i = null, t = [], r = null, u = null;
        n.Employees.Table = {
            Initialize: function () {
                var u = this;
                n.Common.Utils.WaitForJQuery(function () {
                    i = $("#employeesTable").DataTable({
                        processing: !0,
                        serverSide: !1,
                        ajax: {
                            url: "/Employees/ObtenerEmployees",
                            type: "POST",
                            dataType: "json",
                            dataSrc: function (t) {
                                return t.exito
                                    ? t.datos
                                    : (n.Common.Utils.ShowMessage("error", t.mensaje || "Error al cargar datos"), []);
                            },
                            error: function (t, i, r) {
                                n.Common.Utils.ShowMessage("error", "Error al cargar los empleados: " + r);
                            }
                        },
                        columns: u._getColumns(),
                        order: [[1, "asc"]],
                        pageLength: 10,
                        lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "Todos"]],
                        language: u._getLanguageConfig(),
                        dom: "Brtip",
                        buttons: u._getButtons(),
                        responsive: !0,
                        initComplete: function () {
                            u._initializeTooltips();
                        }
                    });
                    n.tablaEmpleados = i;
                    n.empleadosSeleccionados = t;
                    n.fechaContratacionBase = r;
                    i.on("draw", function () {
                        u._initializeTooltips();
                        u._restoreSelectedCheckboxes();
                    });
                });
            },
            Reload: function () {
                i && i.ajax.reload(null, !1);
            },
            GetInstance: function () {
                return i;
            },
            _getColumns: function () {
                return [
                    {
                        data: null,
                        name: "Seleccionar",
                        width: "3%",
                        orderable: !1,
                        searchable: !1,
                        render: function (n, t, i) {
                            return '<input type="checkbox" class="checkbox-empleado" data-id="' + i.idEmpleado + '" data-fecha="' + i.fechaContratacion + '" data-nombre="' + (i.nombreCompleto || i.primerNombre + " " + i.apellido) + '">';
                        }
                    },
                    {
                        data: "nombreCompleto",
                        name: "NombreCompleto",
                        width: "20%",
                        render: function (n, t, i) {
                            return n || i.primerNombre + " " + i.apellido;
                        }
                    },
                    {
                        data: "correoElectronico",
                        name: "CorreoElectronico",
                        width: "15%"
                    },
                    {
                        data: "emailPersonal",
                        name: "EmailPersonal",
                        width: "15%",
                        render: function (ep) {
                            return ep || "-";
                        }
                    },
                    {
                        data: "numeroTelefono",
                        name: "NumeroTelefono",
                        width: "12%"
                    },
                    {
                        data: "fechaContratacion",
                        name: "FechaContratacion",
                        width: "12%"
                    },
                    {
                        data: "salario",
                        name: "Salario",
                        width: "12%",
                        render: function (n) {
                            return n || "-";
                        }
                    },
                    {
                        data: "idDepartamento",
                        name: "IdDepartamento",
                        width: "10%",
                        render: function (n) {
                            return n ? "Dept. " + n : "-";
                        }
                    },
                    {
                        data: null,
                        name: "Acciones",
                        width: "12%",
                        orderable: !1,
                        searchable: !1,
                        render: function (n, t, i) {
                            return '<button type="button" class="btn btn-outline-info btn-sm btn-ver" data-id="' + i.idEmpleado + '" data-bs-toggle="tooltip" data-bs-placement="top" title="Ver Detalles del Empleado" aria-label="Ver Detalles"><i class="fas fa-eye" aria-hidden="true"><\/i><\/button>';
                        }
                    }
                ];
            },
            _getLanguageConfig: function () {
                return {
                    decimal: "",
                    emptyTable: "No hay datos disponibles en la tabla",
                    info: "Mostrando _START_ a _END_ de _TOTAL_ registros",
                    infoEmpty: "Mostrando 0 a 0 de 0 registros",
                    infoFiltered: "(filtrado de _MAX_ registros totales)",
                    infoPostFix: "",
                    thousands: ",",
                    lengthMenu: "Mostrar _MENU_ registros",
                    loadingRecords: "Cargando...",
                    processing: "Procesando...",
                    search: "Buscar:",
                    zeroRecords: "No se encontraron registros coincidentes",
                    paginate: {
                        first: "Primero",
                        last: "Último",
                        next: "Siguiente",
                        previous: "Anterior"
                    },
                    aria: {
                        sortAscending: ": activar para ordenar columna ascendente",
                        sortDescending: ": activar para ordenar columna descendente"
                    }
                };
            },
            _getButtons: function () {
                var t = this;
                return [
                    {
                        text: '<i class="fas fa-sync-alt" aria-hidden="true"><\/i>',
                        action: function (n, t) {
                            t.ajax.reload();
                        },
                        className: "btn btn-sm",
                        titleAttr: "Actualizar tabla de empleados"
                    },
                    {
                        extend: "excel",
                        text: '<i class="fas fa-file-excel" aria-hidden="true"><\/i>',
                        className: "btn btn-sm",
                        exportOptions: { columns: [1, 2, 3, 4, 5, 6, 7] },
                        titleAttr: "Exportar datos a Excel"
                    },
                    {
                        extend: "pdf",
                        text: '<i class="fas fa-file-pdf" aria-hidden="true"><\/i>',
                        className: "btn btn-sm",
                        exportOptions: { columns: [1, 2, 3, 4, 5, 6, 7] },
                        titleAttr: "Exportar datos a PDF"
                    },
                    {
                        extend: "print",
                        text: '<i class="fas fa-print" aria-hidden="true"><\/i>',
                        className: "btn btn-sm",
                        titleAttr: "Imprimir tabla de empleados"
                    },
                    {
                        text: '<i class="fas fa-file-alt"></i>',
                        className: "btn btn-sm",
                        titleAttr: "Exportar email personal a TXT",
                        action: function (e, dt) {

                            var texto = "";

                            // columna 3, encabezado y texto del encabezado "Email Personal"
                            texto += dt.column(3).header().innerText + "\n";
                            texto += "--------------------------\n";

                            // Recorrer solo filas filtradas
                            dt.rows({ search: 'applied' }).every(function () {
                                var row = this.data();
                                var dataSrc = dt.column(3).dataSrc();
                                var valor = row[dataSrc];

                                texto += (valor && valor.trim() !== "" ? valor : "-") + "\n";
                            });

                            // Crear archivo TXT
                            var blob = new Blob([texto], { type: "text/plain;charset=utf-8;" });
                            var url = URL.createObjectURL(blob);

                            var a = document.createElement("a");
                            a.href = url;
                            a.download = "emailPersonal.txt";
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            URL.revokeObjectURL(url);
                        }
                    },
                    {
                        text: '<i class="fas fa-envelope" aria-hidden="true"><\/i> Enviar por Email',
                        action: function () {
                            n.Employees.Email.OpenModal();
                        },
                        className: "btn btn-sm btn-enviar-email",
                        titleAttr: "Enviar información de empleados seleccionados por email"
                    }
                ];
            },
            _initializeTooltips: function () {
                setTimeout(function () {
                    $(".dt-buttons .btn").each(function () {
                        var n = $(this),
                            i = bootstrap.Tooltip.getInstance(n[0]),
                            t;
                        i && i.dispose();
                        t = n.attr("title") || n.data("title-attr");
                        t && (n.attr("data-bs-toggle", "tooltip"),
                            n.attr("data-bs-placement", "top"),
                            n.attr("title", t),
                            new bootstrap.Tooltip(n[0]));
                    });
                    var n = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]:not(.dt-buttons .btn)')),
                        t = n.map(function (n) {
                            var t = bootstrap.Tooltip.getInstance(n);
                            return t && t.dispose(), new bootstrap.Tooltip(n);
                        });
                }, 100);
            },
            _restoreSelectedCheckboxes: function () {
                t.forEach(function (n) {
                    $('.checkbox-empleado[data-id="' + n.id + '"]').prop("checked", !0);
                });
            }
        };
        n.Employees.Filters = {
            Initialize: function () {
                this._initializeDatePickers();
                this._validateSalaryRange();
                this._initializeSalaryInputs();
                this._initializeTextFilters();
            },
            Apply: function () {
                u !== null && $.fn.dataTable.ext.search.pop();
                u = function (n, t, r) {
                    var h = null, f = null, c = null, l = null,
                        k = $("#filtroDepartamento").val().toLowerCase(),
                        d = $("#filtroEmail").val().toLowerCase(),
                        ep = $("#filtroEmailPersonal").val().toLowerCase(),
                        g = $("#filtroTelefono").val().toLowerCase(),
                        nt = $("#filtroFechaInicio").val(),
                        tt = $("#filtroFechaFin").val(),
                        e, o, y, p, w, s, b, a, v, it, rt, ept, ut;
                    nt && (e = nt.split("/"), e.length === 3 && (h = new Date(e[2], e[1] - 1, e[0])));
                    tt && (o = tt.split("/"), o.length === 3 && (f = new Date(o[2], o[1] - 1, o[0]), f.setHours(23, 59, 59, 999)));
                    y = $("#filtroSalarioMin").val();
                    p = $("#filtroSalarioMax").val();
                    y && (c = parseFloat(y.replace(/[^0-9.-]+/g, "")));
                    p && (l = parseFloat(p.replace(/[^0-9.-]+/g, "")));
                    var ft = r,
                        et = i.row(ft),
                        u = et.data();
                    if (!u) return !0;
                    if (h !== null || f !== null)
                        if (w = u.fechaContratacion, w) {
                            if (s = w.split("/"), s.length === 3 && ((b = new Date(s[2], s[1] - 1, s[0]), h !== null && b < h) || f !== null && b > f))
                                return !1;
                        } else return !1;
                    if (c !== null || l !== null)
                        if (a = u.salario, a && a !== "-") {
                            if ((v = parseFloat(a.replace(/[^0-9.-]+/g, "")), isNaN(v)) || c !== null && v < c || l !== null && v > l)
                                return !1;
                        } else return !1;
                    return k && (it = (u.idDepartamento ? "Dept. " + u.idDepartamento : "").toLowerCase(), it.indexOf(k) === -1)
                        ? !1
                        : d && (rt = (u.correoElectronico || "").toLowerCase(), rt.indexOf(d) === -1)
                            ? !1
                            : ep && (ept = (u.emailPersonal || "").toLowerCase(), ept.indexOf(ep) === -1)
                                ? !1
                                : g && (ut = (u.numeroTelefono || "").toLowerCase(), ut.indexOf(g) === -1)
                                    ? !1
                                    : !0;
                };
                $.fn.dataTable.ext.search.push(u);
                i && i.draw();
            },
            _initializeDatePickers: function () {
                if (typeof $.datepicker != "undefined") {
                    $.datepicker.regional.es = {
                        closeText: "Cerrar",
                        prevText: "&#x3C;Ant",
                        nextText: "Sig&#x3E;",
                        currentText: "Hoy",
                        monthNames: ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
                        monthNamesShort: ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
                        dayNames: ["Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado"],
                        dayNamesShort: ["Dom", "Lun", "Mar", "Mié", "Jue", "Vie", "Sáb"],
                        dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sá"],
                        weekHeader: "Sm",
                        dateFormat: "dd/mm/yy",
                        firstDay: 1,
                        isRTL: !1,
                        showMonthAfterYear: !1,
                        yearSuffix: ""
                    };
                    $.datepicker.setDefaults($.datepicker.regional.es);
                    var t = $("#filtroFechaInicio"),
                        i = $("#filtroFechaFin");
                    t.length > 0 && t.datepicker({
                        dateFormat: "dd/mm/yy",
                        changeMonth: !0,
                        changeYear: !0,
                        showButtonPanel: !0,
                        onSelect: function (t) {
                            i.length > 0 && i.datepicker("option", "minDate", t);
                            n.Employees.Filters.Apply();
                        }
                    });
                    i.length > 0 && i.datepicker({
                        dateFormat: "dd/mm/yy",
                        changeMonth: !0,
                        changeYear: !0,
                        showButtonPanel: !0,
                        onSelect: function (i) {
                            t.length > 0 && t.datepicker("option", "maxDate", i);
                            n.Employees.Filters.Apply();
                        }
                    });
                }
            },
            _validateSalaryRange: function () {
                var minVal = $("#filtroSalarioMin").val();
                var maxVal = $("#filtroSalarioMax").val();

                // Limpiar mensajes de error anteriores
                $(".toast").filter(function () {
                    return $(this).text().includes("salario mínimo") ||
                        $(this).text().includes("salario máximo");
                }).remove();

                // Validar solo si estan los dos valores
                if (!minVal || !maxVal) {
                    return true;
                }

                // Convertir texto a numero, sin $ o , 
                var min = parseFloat(minVal.replace(/[^0-9.-]+/g, ""));
                var max = parseFloat(maxVal.replace(/[^0-9.-]+/g, ""));

                if (min > max) {
                    n.Common.Utils.ShowMessage(
                        "error",
                        "El salario mínimo no puede ser mayor que el salario máximo."
                    );

                    return false;
                }

                return true;
            },

            _initializeSalaryInputs: function () {
                if (typeof $.fn.inputmask != "undefined") {
                    var t = $("#filtroSalarioMin"),
                        i = $("#filtroSalarioMax");

                    var s = this;  // Se guarda referencia al objeto actual

                    var validateAndApply = function () {

                        // Espera, valida el rango y aplica filtros
                        setTimeout(function () {

                            s._validateSalaryRange();

                            n.Employees.Filters.Apply();
                        }, 100);
                    };

                    t.length > 0 && t.inputmask({
                        alias: "numeric",
                        groupSeparator: ",",
                        autoGroup: !0,
                        digits: 2,
                        digitsOptional: !1,
                        prefix: "$ ",
                        placeholder: "0",
                        rightAlign: !1,
                        oncomplete: validateAndApply, // Valor completo y valido
                        onincomplete: validateAndApply,  // Valor incompleto
                        oncleared: validateAndApply,  // Campo vacio
                        onblur: validateAndApply  // Pierde el foco
                        // Cada vez que el usuario hace algo, valida y filtra
                    });
                    i.length > 0 && i.inputmask({
                        alias: "numeric",
                        groupSeparator: ",",
                        autoGroup: !0,
                        digits: 2,
                        digitsOptional: !1,
                        prefix: "$ ",
                        placeholder: "0",
                        rightAlign: !1,
                        oncomplete: validateAndApply,
                        onincomplete: validateAndApply,
                        oncleared: validateAndApply,
                        onblur: validateAndApply
                    });
                }
            },
            _initializeTextFilters: function () {
                var n = this;
                $("#filtroBusqueda").on("keyup", function () {
                    i && i.column(1).search(this.value).draw();
                });
                $("#filtroDepartamento").on("keyup", function () {
                    n.Apply();
                });
                $("#filtroEmail").on("keyup", function () {
                    n.Apply();
                });
                $("#filtroEmailPersonal").on("keyup", function () {
                    n.Apply();
                });
                $("#filtroTelefono").on("keyup", function () {
                    n.Apply();
                });
                // Quitar eventos para no duplicar
                $("#filtroSalarioMin, #filtroSalarioMax").off("input blur change keyup");
            }
        };
        n.Employees.Selection = {
            Add: function (i) {
                var r = i.data("id"),
                    u = i.data("nombre"),
                    f = i.data("fecha");
                t.find(n => n.id === r) || t.push({ id: r, nombre: u, fecha: f });
                n.empleadosSeleccionados = t;
            },
            Remove: function (i) {
                var u = i.data("id");
                t = t.filter(n => n.id !== u);
                n.empleadosSeleccionados = t;
                t.length === 0 && (r = null, n.fechaContratacionBase = r);
            },
            HandleCheckboxChange: function (t) {
                var i = t.data("fecha");
                t.prop("checked")
                    ? r === null
                        ? (r = i, n.fechaContratacionBase = r, this.Add(t))
                        : i === r
                            ? this.Add(t)
                            : (t.prop("checked", !1), Swal.fire({
                                icon: "warning",
                                title: "Fecha de Contratación Diferente",
                                text: "Solo se pueden seleccionar empleados con la misma fecha de contratación. La fecha base es: " + r,
                                confirmButtonText: "Entendido"
                            }))
                    : this.Remove(t);
            },
            Clear: function () {
                t = [];
                r = null;
                n.empleadosSeleccionados = t;
                n.fechaContratacionBase = r;
                $(".checkbox-empleado").prop("checked", !1);
            },
            GetSelected: function () {
                return t;
            }
        };
        n.Employees.Email = {
            OpenModal: function () {
                var n, r, u;
                if (t.length === 0) {
                    Swal.fire({
                        icon: "info",
                        title: "Selección Requerida",
                        html: 'Debe seleccionar al menos un elemento de la tabla para enviar por email.<br><br><i class="fas fa-info-circle"><\/i> Use los checkboxes en la primera columna para seleccionar empleados.',
                        confirmButtonText: "Entendido"
                    });
                    return;
                }
                n = [];
                i && i.rows().every(function () {
                    var i = this.data();
                    t.find(n => n.id === i.idEmpleado) && n.push(i);
                });
                r = $("#tablaResumenEmpleados");
                r.empty();
                n.forEach(function (n) {
                    var t = "<tr><td>" + (n.nombreCompleto || n.primerNombre + " " + n.apellido) + "<\/td><td>" + n.correoElectronico + "<\/td><td>" + n.emailPersonal + "<\/td><td>" + (n.numeroTelefono || "-") + "<\/td><td>" + n.fechaContratacion + "<\/td><td>" + (n.salario || "-") + "<\/td><td>" + (n.idDepartamento ? "Dept. " + n.idDepartamento : "-") + "<\/td><\/tr>";
                    r.append(t);
                });
                $("#emailReceptor").val("");
                u = new bootstrap.Modal(document.getElementById("modalEnviarEmail"));
                u.show();
            },
            Validate: function (n) {
                var t, i, r, u;
                return !n || n.trim().length === 0
                    ? { valido: !1, mensaje: "El campo de email no puede estar vacío" }
                    : (t = n.trim(), i = String.fromCharCode(64), t.length < 5)
                        ? { valido: !1, mensaje: "El email es demasiado corto" }
                        : t.length > 254
                            ? { valido: !1, mensaje: "El email es demasiado largo (máximo 254 caracteres)" }
                            : t.indexOf(" ") !== -1
                                ? { valido: !1, mensaje: "El email no puede contener espacios" }
                                : (r = t.indexOf(i), r <= 0)
                                    ? { valido: !1, mensaje: "El email debe contener un símbolo " + i + " después del nombre de usuario" }
                                    : r === t.length - 1
                                        ? { valido: !1, mensaje: "El email debe contener un dominio después del símbolo " + i }
                                        : (u = t.substring(r + 1), u.indexOf(".") === -1)
                                            ? { valido: !1, mensaje: "El dominio del email debe contener al menos un punto (ej: dominio.com)" }
                                            : u.indexOf(".") === u.length - 1
                                                ? { valido: !1, mensaje: "El dominio del email debe tener una extensión después del punto (ej: .com, .org)" }
                                                : t.split(i).length > 2
                                                    ? { valido: !1, mensaje: "El email no puede contener múltiples símbolos " + i }
                                                    : { valido: !0, mensaje: "" };
            },
            Send: function () {
                var i = $("#emailReceptor").val(),
                    r = this.Validate(i),
                    u, f;
                if (!r.valido) {
                    u = String.fromCharCode(64);
                    Swal.fire({
                        icon: "error",
                        title: "Email Inválido",
                        html: "<strong>" + r.mensaje + "<\/strong><br><br>Por favor ingrese un email válido con el formato:<br><code>ejemplo" + u + "dominio.com<\/code>",
                        confirmButtonText: "Entendido"
                    });
                    return;
                }
                f = t.map(n => n.nombre).join(", ");
                Swal.fire({
                    icon: "success",
                    title: "Email Enviado Exitosamente",
                    html: "El email ha sido enviado a: <strong>" + i + "<\/strong><br><br>Empleados incluidos:<br>" + f,
                    confirmButtonText: "Aceptar"
                }).then(function () {
                    var t = bootstrap.Modal.getInstance(document.getElementById("modalEnviarEmail"));
                    t.hide();
                    n.Employees.Selection.Clear();
                });
            }
        };
        n.Employees.Details = {
            View: function (t) {
                $.ajax({
                    url: "/Employees/ObtenerEmployeePorId",
                    type: "POST",
                    contentType: "application/json",
                    data: JSON.stringify(t),
                    dataType: "json",
                    success: function (t) {
                        if (t.exito) {
                            var i = t.datos,
                                r = "ID Empleado: " + i.idEmpleado
                                    + "\nNombre: " + i.nombreCompleto
                                    + "\nEmail: " + i.correoElectronico
                                    + "\nEmailPersonal: " + i.emailPersonal.toLowerCase()
                                    + "\nTeléfono: " + (i.numeroTelefono || "N/A")
                                    + "\nFecha Contratación: " + i.fechaContratacion
                                    + "\nSalario: " + (i.salario || "N/A");
                            alert(r);
                        } else n.Common.Utils.ShowMessage("error", t.mensaje || "Error al cargar el empleado");
                    },
                    error: function (t, i, r) {
                        n.Common.Utils.ShowMessage("error", "Error al cargar el empleado: " + r);
                    }
                });
            }
        };
        n.Employees.Events = {
            Initialize: function () {
                var t = this;
                n.Common.Utils.WaitForJQuery(function () {
                    $("#employeesTable tbody").on("change", ".checkbox-empleado", function () {
                        n.Employees.Selection.HandleCheckboxChange($(this));
                    });
                    $("#employeesTable tbody").on("click", ".btn-ver", function () {
                        var t = $(this).data("id");
                        n.Employees.Details.View(t);
                    });
                    $("#btnConfirmarEnvio").on("click", function () {
                        n.Employees.Email.Send();
                    });
                });
            }
        };
        n.Employees.Initialize = function () {
            n.Common.Utils.WaitForJQuery(function () {
                n.Employees.Table.Initialize();
                n.Employees.Filters.Initialize();
                n.Employees.Events.Initialize();
            });
        };
        typeof document != "undefined" && (document.readyState === "loading"
            ? document.addEventListener("DOMContentLoaded", function () {
                n.Employees.Initialize();
            })
            : n.Employees.Initialize());
    }(window);